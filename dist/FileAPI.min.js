/*! fileapi 2.0.0 - BSD | git://github.com/mailru/FileAPI.git */
(function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),a=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,r=(n||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,r,o,s,l,u;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),r=new ArrayBuffer(t.length),o=new Uint8Array(r),s=0;t.length>s;s+=1)o[s]=t.charCodeAt(s);return l=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([a?o:r],{type:l}):(u=new i,u.append(r),u.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,t){e(this.mozGetAsFile("blob",t))}:t.toDataURL&&r&&(t.toBlob=function(e,t,n){e(r(this.toDataURL(t,n)))})),e.dataURLtoBlob=r})(window),function(e,t){"use strict";function n(e,t,n,a,i){var r={type:n.type||n,target:e,result:a};$.extend(r,i),t(r)}function a(e){return b&&!!b.prototype["readAs"+e]}function i(e,i,r,o){if($.isFile(e)&&a(r)){var s=new b;W(s,O,function l(t){var a=t.type;"progress"==a?n(e,i,t,t.target.result,{loaded:t.loaded,total:t.total}):"loadend"==a?(G(s,O,l),s=null):n(e,i,t,t.target.result)});try{o?s["readAs"+r](e,o):s["readAs"+r](e)}catch(u){n(e,i,"error",t,{error:""+u})}}else n(e,i,"error",t,{error:"filreader_not_support_"+r})}function r(e,t){if(!e.type&&0===e.size%4096&&102400>=e.size)if(b)try{var n=new b;K(n,O,function(e){var a="error"!=e.type;t(a),a&&n.abort()}),n.readAsDataURL(e)}catch(a){t(!1)}else t(null);else t(!0)}function o(e){var t;return e.getAsEntry?t=e.getAsEntry():e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),t}function s(e,t){if(e)if(e.isFile)e.file(function(e){t(!1,[e])},function(){t("entry_file")});else if(e.isDirectory){var n=e.createReader(),a=[];n.readEntries(function(e){$.afor(e,function(e,n){s(n,function(n,i){n||(a=a.concat(i)),e?e():t(!1,a)})})},function(){t("directory_reader")})}else s(o(e),t);else t("empty_entry")}function l(e){var t={};return X(e,function(e,n){e&&"object"==typeof e&&void 0===e.nodeType&&(e=$.extend({},e)),t[n]=e}),t}function u(e){return k.test(e&&e.tagName)}function c(e){return(e.originalEvent||e||"").dataTransfer||{}}function f(e){var t;for(t in e)if(e.hasOwnProperty(t)&&!(e[t]instanceof Object||"overlay"===t))return!0;return!1}var d=1,p=function(){},h=e.document,m=e.navigator.userAgent,g=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL&&webkitURL,v=e.Blob,y=e.File,b=e.FileReader,w=e.FormData,x=e.XMLHttpRequest,A=e.jQuery,F=!(!(y&&b&&(e.Uint8Array||w||x.prototype.sendAsBinary))||/safari\//i.test(m)&&!/chrome\//i.test(m)&&/windows/i.test(m)),I=F&&"withCredentials"in new x,R=F&&!!v&&!!(v.prototype.webkitSlice||v.prototype.mozSlice||v.prototype.slice),T=e.dataURLtoBlob,_=/img/i,E=/canvas/i,U=/img|canvas/i,k=/input/i,D=/^data:[^,]+,/,L=e.Number,B=e.Math,C=B.pow,j=B.round,H=function(e){return e=new L(C(1024,e)),e.from=function(e){return j(e*this)},e},S={},z=[],O="abort progress error load loadend",M="status statusText readyState response responseXML responseText responseBody".split(" "),P="currentTarget",N="preventDefault",q=function(e){return"object"==typeof e&&e&&"length"in e},X=function(e,t,n){if(e)if(q(e))for(var a=0,i=e.length;i>a;a++)a in e&&t.call(n,e[a],a,e);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)},W=function(e,t,n){if(e){var a=$.uid(e);S[a]||(S[a]={}),X(t.split(/\s+/),function(t){A?A.event.add(e,t,n):(S[a][t]||(S[a][t]=[]),S[a][t].push(n),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)})}},G=function(e,t,n){if(e){var a=$.uid(e),i=S[a]||{};X(t.split(/\s+/),function(t){if(A)A.event.remove(e,t,n);else{for(var a=i[t]||[],r=a.length;r--;)if(a[r]===n){a.splice(r,1);break}e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}})}},K=function(e,t,n){W(e,t,function a(i){G(e,t,a),n(i)})},Q=function(t){return t.target||(t.target=e.event&&e.event.srcElement||h),3===t.target.nodeType&&(t.target=t.target.parentNode),t},J=function(e){var t=h.createElement("input");return t.setAttribute("type","file"),e in t},$={version:"2.0.0b",cors:!1,html5:!0,debug:!1,pingUrl:!1,multiFlash:!1,flashAbortTimeout:0,withCredentials:!0,staticPath:"./dist/",flashUrl:0,flashImageUrl:0,ext2mime:{jpg:"image/jpeg",tif:"image/tiff"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:H(1),MB:H(2),GB:H(3),TB:H(4),expando:"fileapi"+(new Date).getTime(),uid:function(e){return e?e[$.expando]=e[$.expando]||$.uid():(++d,$.expando+d)},log:function(){$.debug&&e.console&&console.log&&(console.log.apply?console.log.apply(console,arguments):console.log([].join.call(arguments," ")))},newImage:function(e,t){var n=h.createElement("img");return t&&$.event.one(n,"error load",function(e){t("error"==e.type,n),n=null}),n.src=e,n},getXHR:function(){var t;if(x)t=new x;else if(e.ActiveXObject)try{t=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(n){t=new ActiveXObject("Microsoft.XMLHTTP")}return t},isArray:q,support:{dnd:I&&"ondrop"in h.createElement("div"),cors:I,html5:F,chunked:R,dataURI:!0,accept:J("accept"),multiple:J("multiple")},event:{on:W,off:G,one:K,fix:Q},throttle:function(t,n){var a,i;return function(){i=arguments,a||(t.apply(e,i),a=setTimeout(function(){a=0,t.apply(e,i)},n))}},F:function(){},parseJSON:function(t){var n;return n=e.JSON&&JSON.parse?JSON.parse(t):Function("return ("+t.replace(/([\r\n])/g,"\\$1")+");")()},trim:function(e){return e+="",e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},defer:function(){var e,n,a=[],i={resolve:function(t,r){for(i.resolve=p,n=t||!1,e=r;r=a.shift();)r(n,e)},then:function(i){n!==t?i(n,e):a.push(i)}};return i},queue:function(e){var t=0,n=0,a=!1,i=!1,r={inc:function(){n++},next:function(){t++,setTimeout(r.check,0)},check:function(){t>=n&&!a&&r.end()},isFail:function(){return a},fail:function(){!a&&e(a=!0)},end:function(){i||(i=!0,e())}};return r},each:X,afor:function(e,t){var n=0,a=e.length;q(e)&&a--?function i(){t(a!=n&&i,e[n],n++)}():t(!1)},extend:function(e){for(var t=arguments,n=1,a=function(t,n){e[n]=t};t.length>n;n++)X(t[n],a);return e},isFile:function(e){return F&&e&&e instanceof y},isCanvas:function(e){return e&&E.test(e.nodeName)},getFilesFilter:function(e){return e="string"==typeof e?e:e.getAttribute&&e.getAttribute("accept")||"",e?RegExp("("+e.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(e,t){$.isCanvas(e)?n(e,t,"load",$.toDataURL(e)):i(e,t,"DataURL")},readAsBinaryString:function(e,t){a("BinaryString")?i(e,t,"BinaryString"):i(e,function(e){if("load"==e.type)try{e.result=$.toBinaryString(e.result)}catch(n){e.type="error",e.message=""+n}t(e)},"DataURL")},readAsArrayBuffer:function(e,t){i(e,t,"ArrayBuffer")},readAsText:function(e,t,n){n||(n=t,t="utf-8"),i(e,n,"Text",t)},toDataURL:function(e,t){return"string"==typeof e?e:e.toDataURL?e.toDataURL(t||"image/png"):void 0},toBinaryString:function(t){return e.atob($.toDataURL(t).replace(D,""))},readAsImage:function(e,a,i){if($.isFile(e))if(g){var r=g.createObjectURL(e);r===t?n(e,a,"error"):$.readAsImage(r,a,i)}else $.readAsDataURL(e,function(t){"load"==t.type?$.readAsImage(t.result,a,i):(i||"error"==t.type)&&n(e,a,t,null,{loaded:t.loaded,total:t.total})});else if($.isCanvas(e))n(e,a,"load",e);else if(_.test(e.nodeName))if(e.complete)n(e,a,"load",e);else{var o="error abort load";K(e,o,function s(t){"load"==t.type&&g&&g.revokeObjectURL(e.src),G(e,o,s),n(e,a,t,e)})}else if(e.iframe)n(e,a,{type:"error"});else{var l=$.newImage(e.dataURL||e);$.readAsImage(l,a,i)}},checkFileObj:function(e){var t={},n=$.accept;return"object"==typeof e?t=e:t.name=(e+"").split(/\\|\//g).pop(),null==t.type&&(t.type=t.name.split(".").pop()),X(n,function(e,n){e=RegExp(e.replace(/\s/g,"|"),"i"),e.test(t.type)&&(t.type=$.ext2mime[t.type]||n.split("/")[0]+"/"+t.type)}),t},getDropFiles:function(e,t){var n=[],a=c(e),i=q(a.items)&&a.items[0]&&o(a.items[0]),l=$.queue(function(){t(n)});X((i?a.items:a.files)||[],function(e){l.inc(),i?s(e,function(e,t){!e&&n.push.apply(n,t),l.next()}):r(e,function(t){t&&n.push(e),l.next()})}),l.check()},getFiles:function(e,t,n){var a=[];return n?($.filterFiles($.getFiles(e),t,n),null):(e.jquery&&(e.each(function(){a=a.concat($.getFiles(this))}),e=a,a=[]),"string"==typeof t&&(t=$.getFilesFilter(t)),e.originalEvent?e=Q(e.originalEvent):e.srcElement&&(e=Q(e)),e.dataTransfer?e=e.dataTransfer:e.target&&(e=e.target),e.files?a=e.files:!F&&u(e)?$.trim(e.value)&&(a=[$.checkFileObj(e.value)],a[0].blob=e,a[0].iframe=!0):q(e)&&(a=e),$.filter(a,function(e){return!t||t.test(e.name)}))},getTotalSize:function(e){for(var t=0,n=e&&e.length;n--;)t+=e[n].size;return t},getInfo:function(e,t){var n={},a=z.concat();$.isFile(e)?function i(){var r=a.shift();r?r.test(e.type)?r(e,function(e,a){e?t(e):($.extend(n,a),i())}):i():t(!1,n)}():t("not_support_info",n)},addInfoReader:function(e,t){t.test=function(t){return e.test(t)},z.push(t)},filter:function(e,t){for(var n,a=[],i=0,r=e.length;r>i;i++)i in e&&(n=e[i],t.call(n,n,i,e)&&a.push(n));return a},filterFiles:function(e,t,n){if(e.length){var a,i=e.concat(),r=[],o=[];(function s(){i.length?(a=i.shift(),$.getInfo(a,function(e,n){(t(a,e?!1:n)?r:o).push(a),s()})):n(r,o)})()}else n([],e)},upload:function(e){e=$.extend({prepare:$.F,beforeupload:$.F,upload:$.F,fileupload:$.F,fileprogress:$.F,filecomplete:$.F,progress:$.F,complete:$.F,pause:$.F,imageOriginal:!0,chunkSize:$.chunkSize,chunkUpoloadRetry:$.chunkUploadRetry},e),e.imageAutoOrientation&&!e.imageTransform&&(e.imageTransform={rotate:"auto"});var t,n=new $.XHR(e),a=this._getFilesDataArray(e.files),i=this,r=0,o=0,s=!1;return X(a,function(e){r+=e.size}),n.files=[],X(a,function(e){n.files.push(e.file)}),n.total=r,n.loaded=0,n.filesLeft=a.length,e.beforeupload(n,e),t=function(){var u=a.shift(),c=u&&u.file,f=!1,d=l(e);n.filesLeft=a.length,c&&c.name===$.expando&&(c=null,$.log("[warn] FileAPI.upload() â€” called without files")),("abort"!=n.statusText||n.current)&&u?(s=!1,n.currentFile=c,c&&e.prepare(c,d),i._getFormData(d,u,function(s){o||e.upload(n,e);var l=new $.XHR($.extend({},d,{upload:c?function(){e.fileupload(c,l,d)}:p,progress:c?function(t){f||(e.fileprogress({type:"progress",total:u.total=t.total,loaded:u.loaded=t.loaded},c,l,d),e.progress({type:"progress",total:r,loaded:n.loaded=0|o+u.size*(t.loaded/t.total)},c,l,d))}:p,complete:function(a){f=!0,X(M,function(e){n[e]=l[e]}),c&&(u.loaded=u.total,this.progress(u),o+=u.size,n.loaded=o,e.filecomplete(a,l,c,d)),t.call(i)}}));n.abort=function(e){e||(a.length=0),this.current=e,l.abort()},l.send(s)})):(e.complete(200==n.status||201==n.status?!1:n.statusText||"error",n,e),s=!0)},setTimeout(t,0),n.append=function(e,o){e=$._getFilesDataArray([].concat(e)),X(e,function(e){r+=e.size,n.files.push(e.file),o?a.unshift(e):a.push(e)}),n.statusText="",s&&t.call(i)},n.remove=function(e){for(var t,n=a.length;n--;)a[n].file==e&&(t=a.splice(n,1),r-=t.size);return t},n},_getFilesDataArray:function(e){var t=[],n={};if(u(e)){var a=$.getFiles(e);n[e.name||"file"]=null!==e.getAttribute("multiple")?a:a[0]}else q(e)&&u(e[0])?X(e,function(e){n[e.name||"file"]=$.getFiles(e)}):n=e;return X(n,function i(e,n){q(e)?X(e,function(e){i(e,n)}):e&&(e.name||e.image)&&t.push({name:n,file:e,size:e.size,total:e.size,loaded:0})}),t.length||t.push({file:{name:$.expando}}),t},_getFormData:function(e,t,n){var a=t.file,i=t.name,r=a.name,o=a.type,s=$.support.transform&&e.imageTransform,l=new $.Form,u=$.queue(function(){n(l)}),c=s&&f(s);(function d(t){t.image?(u.inc(),t.toData(function(e,t){r=r||(new Date).getTime()+".png",d(t),u.next()})):$.Image&&s&&(/^image/.test(t.type)||U.test(t.nodeName))?(u.inc(),c&&(s=[s]),$.Image.transform(t,s,e.imageAutoOrientation,function(n,a){if(c&&!n)T||$.flashEngine||(l.multipart=!0),l.append(i,a[0],r,s[0].type||o);else{var f=0;n||X(a,function(e,t){T||$.flashEngine||(l.multipart=!0),s[t].postName||(f=1),l.append(s[t].postName||i+"["+t+"]",e,r,s[t].type||o)}),(n||e.imageOriginal)&&l.append(i+(f?"[original]":""),t,r,o)}u.next()})):r!==$.expando&&l.append(i,t,r)})(a),X(e.data,function p(e,t){"object"==typeof e?X(e,function(e,n){p(e,t+"["+n+"]")}):l.append(t,e)}),u.check()},reset:function(e){var t,n;return A?(n=A(e).clone(!0).insertBefore(e).val("")[0],A(e).remove()):(t=e.parentNode,n=t.insertBefore(e.cloneNode(!0),e),n.value="",t.removeChild(e),X(S[$.uid(e)],function(t,a){X(t,function(t){G(e,a,t),W(n,a,t)})})),n},load:function(e,t){var n=$.getXHR();return n?(n.open("GET",e,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),W(n,"progress",function(e){e.lengthComputable&&t({type:e.type,loaded:e.loaded,total:e.total},n)}),n.onreadystatechange=function(){if(4==n.readyState)if(n.onreadystatechange=null,200==n.status){e=e.split("/");var a={name:e[e.length-1],size:n.getResponseHeader("Content-Length"),type:n.getResponseHeader("Content-Type")};a.dataURL="data:"+a.type+";base64,"+$.encode64(n.responseBody||n.responseText),t({type:"load",result:a},n)}else t({type:"error"},n)},n.send(null)):t({type:"error"}),n},encode64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",a=0;for("string"!=typeof e&&(e+="");e.length>a;){var i,r,o=255&e.charCodeAt(a++),s=255&e.charCodeAt(a++),l=255&e.charCodeAt(a++),u=o>>2,c=(3&o)<<4|s>>4;isNaN(s)?i=r=64:(i=(15&s)<<2|l>>6,r=isNaN(l)?64:63&l),n+=t.charAt(u)+t.charAt(c)+t.charAt(i)+t.charAt(r)}return n}};$.addInfoReader(/^image/,function(e,t){if(!e.__dimensions){var n=e.__dimensions=$.defer();$.readAsImage(e,function(e){var t=e.target;n.resolve("load"==e.type?!1:"error",{width:t.width,height:t.height}),t=null})}e.__dimensions.then(t)}),$.event.dnd=function(e,t,n){var a,i;n||(n=t,t=$.F),b?(W(e,"dragenter dragleave dragover",function(e){for(var n=c(e).types,r=n&&n.length,o=!1;r--;)if(~n[r].indexOf("File")){e[N](),i!==e.type&&(i=e.type,"dragleave"!=i&&t.call(e[P],!0,e),o=!0);break}o&&(clearTimeout(a),a=setTimeout(function(){t.call(e[P],"dragleave"!=i,e)},50))}),W(e,"drop",function(e){e[N](),i=0,t.call(e[P],!1,e),$.getDropFiles(e,function(t){n.call(e[P],t,e)})})):$.log("Drag'n'Drop -- not supported")},$.event.dnd.off=function(e,t,n){G(e,"dragenter dragleave dragover",t),G(e,"drop",n)},A&&!A.fn.dnd&&(A.fn.dnd=function(e,t){return this.each(function(){$.event.dnd(this,e,t)})},A.fn.offdnd=function(e,t){return this.each(function(){$.event.dnd.off(this,e,t)})}),e.FileAPI=$.extend($,e.FileAPI),$.flashUrl||($.flashUrl=$.staticPath+"FileAPI.flash.swf"),$.flashImageUrl||($.flashImageUrl=$.staticPath+"FileAPI.flash.image.swf")}(window,void 0),function(e,t,n){"use strict";function a(t){if(t instanceof a){var n=new a(t.file);return e.extend(n.matrix,t.matrix),n}return this instanceof a?(this.file=t,this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1},void 0):new a(t)}var i=Math.min,r=Math.round,o=function(){return t.createElement("canvas")},s=!1,l={8:270,3:180,6:90};try{s=o().toDataURL("image/png").indexOf("data:image/png")>-1}catch(u){}a.prototype={image:!0,constructor:a,set:function(t){return e.extend(this.matrix,t),this},crop:function(e,t,a,i){return a===n&&(a=e,i=t,e=t=0),this.set({sx:e,sy:t,sw:a,sh:i||a})},resize:function(e,t,n){return"string"==typeof t&&(n=t,t=e),this.set({dw:e,dh:t,resize:n})},preview:function(e,t){return this.resize(e,t||e,"preview")},rotate:function(e){return this.set({deg:e})},overlay:function(e){return this.set({overlay:e})},clone:function(){return new a(this)},_load:function(t,n){var a=this;/img|video/i.test(t.nodeName)?n.call(a,null,t):e.readAsImage(t,function(e){n.call(a,"load"!=e.type,e.result)})},_apply:function(t,n){for(var a,r=o(),s=this.getMatrix(t),l=r.getContext("2d"),u=t.videoWidth||t.width,c=t.videoHeight||t.height,f=s.deg,d=s.dw,p=s.dh,h=u,m=c,g=t,v=s.overlay,y=e.queue(function(){n(!1,r)});i(h/d,m/p)>2;)h=0|h/2+.5,m=0|m/2+.5,a=o(),a.width=h,a.height=m,g!==t?(a.getContext("2d").drawImage(g,0,0,g.width,g.height,0,0,h,m),g=a):(g=a,g.getContext("2d").drawImage(t,s.sx,s.sy,s.sw,s.sh,0,0,h,m),s.sx=s.sy=s.sw=s.sh=0);r.width=f%180?p:d,r.height=f%180?d:p,r.type=s.type,r.quality=s.quality,l.rotate(f*Math.PI/180),l.drawImage(g,s.sx,s.sy,s.sw||g.width,s.sh||g.height,180==f||270==f?-d:0,90==f||180==f?-p:0,d,p),d=r.width,p=r.height,v&&e.each([].concat(v),function(t){y.inc();var n=new window.Image,a=function(){var i=0|t.x,r=0|t.y,o=t.w||n.width,s=t.h||n.height,u=t.rel;i=1==u||4==u||7==u?(d-o+i)/2:2==u||5==u||8==u?d-(o+i):i,r=3==u||4==u||5==u?(p-s+r)/2:u>=6?p-(s+r):r,e.event.off(n,"error load abort",a);try{l.globalAlpha=t.opacity||1,l.drawImage(n,i,r,o,s)}catch(c){}y.next()};e.event.on(n,"error load abort",a),n.src=t.src,n.complete&&a()}),y.check()},getMatrix:function(t){var n=e.extend({},this.matrix),a=n.sw=n.sw||t.videoWidth||t.width,o=n.sh=n.sh||t.videoHeight||t.height,s=n.dw=n.dw||a,l=n.dh=n.dh||o,u=a/o,c=s/l,f=n.resize;if("preview"==f){if(s!=a||l!=o){var d,p;c>=u?(d=a,p=d/c):(p=o,d=p*c),(d!=a||p!=o)&&(n.sx=~~((a-d)/2),n.sy=~~((o-p)/2),a=d,o=p)}}else f&&(a>s||o>l?"min"==f?(s=r(c>u?i(a,s):l*u),l=r(c>u?s/u:i(o,l))):(s=r(u>=c?i(a,s):l*u),l=r(u>=c?s/u:i(o,l))):(s=a,l=o));return n.sw=a,n.sh=o,n.dw=s,n.dh=l,n},_trans:function(e){this._load(this.file,function(t,n){t?e(t):this._apply(n,e)})},get:function(t){if(e.support.transform){var n=this,a=n.matrix;"auto"==a.deg?e.getInfo(n.file,function(e,i){a.deg=l[i&&i.exif&&i.exif.Orientation]||0,n._trans(t)}):n._trans(t)}else t("not_support_transform")},toData:function(e){this.get(e)}},a.exifOrientation=l,a.transform=function(t,i,r,o){function s(s,l){var u={},c=e.queue(function(e){o(e,u)});s?c.fail():e.each(i,function(e,i){if(!c.isFail()){var o=new a(l.nodeType?l:t);if("function"==typeof e?e(l,o):e.width?o[e.preview?"preview":"resize"](e.width,e.height,e.type):e.maxWidth&&(l.width>e.maxWidth||l.height>e.maxHeight)&&o.resize(e.maxWidth,e.maxHeight,"max"),e.crop){var s=e.crop;o.crop(0|s.x,0|s.y,s.w||s.width,s.h||s.height)}e.rotate===n&&r&&(e.rotate="auto"),o.set({deg:e.rotate,type:e.type||t.type||"image/png",quality:e.quality||1,overlay:e.overlay}),c.inc(),o.toData(function(e,t){e?c.fail():(u[i]=t,c.next())})}})}t.width?s(!1,t):e.getInfo(t,s)},e.each(["TOP","CENTER","BOTTOM"],function(t,n){e.each(["LEFT","CENTER","RIGHT"],function(e,i){a[t+"_"+e]=3*n+i,a[e+"_"+t]=3*n+i})}),a.fromDataURL=function(t,n,a){var i=e.newImage(t);e.extend(i,n),a(i)},e.support.canvas=e.support.transform=s,e.Image=a}(FileAPI,document),function(e,t){"use strict";function n(t,n,a){var i=t.blob,r=t.file;if(r){if(!i.toDataURL)return e.readAsBinaryString(i,function(e){"load"==e.type&&n(t,e.result)}),void 0;var o={"image/jpeg":".jpe?g","image/png":".png"},s=o[t.type]?t.type:"image/png",l=o[s]||".png",u=i.quality||1;r.match(RegExp(l+"$","i"))||(r+=l.replace("?","")),t.file=r,t.type=s,!a&&i.toBlob?i.toBlob(function(e){n(t,e)},s,u):n(t,e.toBinaryString(i.toDataURL(s,u)))}else n(t,i)}var a=t.document,i=t.FormData,r=function(){this.items=[]},o=t.encodeURIComponent,s=/phantomjs/i.test(navigator.userAgent);r.prototype={append:function(e,t,n,a){this.items.push({name:e,blob:t&&t.blob||(void 0==t?"":t),file:t&&(n||t.name),type:t&&(a||t.type)})},each:function(e){for(var t=0,n=this.items.length;n>t;t++)e.call(this,this.items[t])},toData:function(t,n){n._chunked=e.support.chunked&&n.chunkSize>0&&1==e.filter(this.items,function(e){return e.file}).length,e.support.html5?s||this.multipart||!i?(e.log("FileAPI.Form.toMultipartData"),this.toMultipartData(t)):n._chunked?(e.log("FileAPI.Form.toPlainData"),this.toPlainData(t)):(e.log("FileAPI.Form.toFormData"),this.toFormData(t)):(e.log("FileAPI.Form.toHtmlData"),this.toHtmlData(t))},_to:function(t,n,a,i){var r=e.queue(function(){n(t)});this.each(function(e){a(e,t,r,i)}),r.check()},toHtmlData:function(t){this._to(a.createDocumentFragment(),t,function(t,n){var i,r=t.blob;t.file?(e.reset(r),r.name=t.name,n.appendChild(r)):(i=a.createElement("input"),i.name=t.name,i.type="hidden",i.value=r,n.appendChild(i))})},toPlainData:function(e){this._to({},e,function(e,t,a){e.file&&(t.type=e.file),e.blob.toBlob?(a.inc(),n(e,function(e,n){t.name=e.name,t.file=n,t.size=n.length,t.type=e.type,a.next()})):e.file?(t.name=e.blob.name,t.file=e.blob,t.size=e.blob.size,t.type=e.type):(t.params||(t.params=[]),t.params.push(o(e.name)+"="+o(e.blob))),t.start=-1,t.end=t.file.FileAPIReadPosition||-1,t.retry=0})},toFormData:function(e){this._to(new i,e,function(e,t,a){e.blob&&e.blob.toBlob?(a.inc(),n(e,function(e,n){t.append(e.name,n,e.file),a.next()})):e.file?t.append(e.name,e.blob,e.file):t.append(e.name,e.blob),e.file&&t.append("_"+e.name,e.file)})},toMultipartData:function(t){this._to([],t,function(e,t,a,i){a.inc(),n(e,function(e,n){t.push("--_"+i+('\r\nContent-Disposition: form-data; name="'+e.name+'"'+(e.file?'; filename="'+o(e.file)+'"':"")+(e.file?"\r\nContent-Type: "+(e.type||"application/octet-stream"):"")+"\r\n"+"\r\n"+(e.file?n:o(n))+"\r\n")),a.next()},!0)},e.expando)}},e.Form=r}(FileAPI,window),function(e,t){"use strict";var n=function(){},a=e.document,i=function(e){this.uid=t.uid(),this.xhr={abort:n,getResponseHeader:n,getAllResponseHeaders:n},this.options=e},r={"":1,XML:1,Text:1,Body:1};i.prototype={status:0,statusText:"",constructor:i,getResponseHeader:function(e){return this.xhr.getResponseHeader(e)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(a,i){var r=this,o=r.options;r.end=r.abort=n,r.status=a,i&&(r.statusText=i),t.log("xhr.end:",a,i),o.complete(200==a||201==a?!1:r.statusText||"unknown",r),r.xhr&&r.xhr.node&&setTimeout(function(){var t=r.xhr.node;try{t.parentNode.removeChild(t)}catch(n){}try{delete e[r.uid]}catch(n){}e[r.uid]=r.xhr.node=null},9)},abort:function(){this.end(0,"abort"),this.xhr&&(this.xhr.aborted=!0,this.xhr.abort())},send:function(e){var t=this,n=this.options;e.toData(function(e){n.upload(n,t),t._send.call(t,n,e)},n)},_send:function(n,i){var o,s=this,l=s.uid,u=n.url;if(t.log("XHR._send:",i),u+=(~u.indexOf("?")?"&":"?")+t.uid(),i.nodeName){n.upload(n,s),o=a.createElement("div"),o.innerHTML='<form target="'+l+'" action="'+u+'" method="POST" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;">'+'<iframe name="'+l+'" src="javascript:false;"></iframe>'+'<input value="'+l+'" name="callback" type="hidden"/>'+"</form>",s.xhr.abort=function(){var e=o.getElementsByName("iframe")[0];if(e)try{e.stop?e.stop():e.contentWindow.stop?e.contentWindow.stop():e.contentWindow.document.execCommand("Stop")}catch(t){}o=null};var c=o.getElementsByTagName("form")[0];c.appendChild(i),t.log(c.parentNode.innerHTML),a.body.appendChild(o),s.xhr.node=o,e[l]=function(e,t,n){s.readyState=4,s.responseText=n,s.end(e,t),o=null},s.readyState=2,c.submit(),c=null}else{if(this.xhr&&this.xhr.aborted)return t.log("Error: already aborted"),void 0;if(o=s.xhr=t.getXHR(),i.params&&(u+=(0>u.indexOf("?")?"?":"&")+i.params.join("&")),o.open("POST",u,!0),t.withCredentials&&(o.withCredentials="true"),n.headers&&n.headers["X-Requested-With"]||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.each(n.headers,function(e,t){o.setRequestHeader(t,e)}),n._chunked){o.upload&&o.upload.addEventListener("progress",function(e){i.retry||n.progress({type:e.type,total:i.size,loaded:i.start+e.loaded,totalSize:i.size},s,n)},!1),o.onreadystatechange=function(){var e=parseInt(o.getResponseHeader("X-Last-Known-Byte"),10);if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var a in r)s["response"+a]=o["response"+a];if(o.onreadystatechange=null,!o.status||o.status-201>0)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status||416==o.status)&&++i.retry<=n.chunkUploadRetry){var l=o.status?0:t.chunkNetworkDownRetryTimeout;n.pause(i.file,n),t.log("X-Last-Known-Byte: "+e),i.end=e?parseInt(e,10):i.start-1,setTimeout(function(){s._send(n,i)},l)}else s.end(o.status);else i.retry=0,i.end==i.size-1?s.end(o.status):(t.log("X-Last-Known-Byte: "+e),e&&(i.end=e),i.file.FileAPIReadPosition=i.end,setTimeout(function(){s._send(n,i)},0));o=null}},i.start=i.end+1,i.end=Math.max(Math.min(i.start+n.chunkSize,i.size)-1,i.start);var f;(f="slice")in i.file||(f="mozSlice")in i.file||(f="webkitSlice")in i.file,o.setRequestHeader("Content-Range","bytes "+i.start+"-"+i.end+"/"+i.size),o.setRequestHeader("Content-Disposition","attachment; filename="+encodeURIComponent(i.name)),o.setRequestHeader("Content-Type",i.type||"application/octet-stream"),f=i.file[f](i.start,i.end+1),o.send(f),f=null}else if(o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){n.progress(e,s,n)},100),!1),o.onreadystatechange=function(){if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var e in r)s["response"+e]=o["response"+e];o.onreadystatechange=null,s.end(o.status),o=null}},t.isArray(i))if(o.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+t.expando),i=i.join("")+"--_"+t.expando+"--",o.sendAsBinary)o.sendAsBinary(i);else{var d=Array.prototype.map.call(i,function(e){return 255&e.charCodeAt(0)});o.send(new Uint8Array(d).buffer)}else o.send(i)}}},t.XHR=i}(window,FileAPI),function(e,t){"use strict";function n(e){return e>=0?e+"px":e}function a(e){var t=o.createElement("canvas");return t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0),t}function i(e){var t,n=o.createElement("canvas"),a=!1;try{t=n.getContext("2d"),t.drawImage(e,0,0,1,1),a=255!=t.getImageData(0,0,1,1).data[4]}catch(i){}return a}var r=e.URL||e.webkitURL,o=e.document,s=e.navigator,l=s.getUserMedia||s.webkitGetUserMedia||s.mozGetUserMedia||s.msGetUserMedia,u=!!l;t.support.media=u;var c=function(e){this.video=e};c.prototype={isActive:function(){return!!this._active},start:function(e){var t,n,a=this,o=a.video,u=function(i){a._active=!i,clearTimeout(n),clearTimeout(t),e&&e(i,a)};l.call(s,{video:!0},function(e){a.stream=e,o.src=r.createObjectURL(e),t=setInterval(function(){i(o)&&u(null)},1e3),n=setTimeout(function(){u("timeout")},5e3),o.play()},u)},stop:function(){try{this._active=!1,this.video.pause(),this.stream.stop()}catch(e){}},shot:function(){return new f(this.video)}},c.get=function(e){return new c(e.firstChild)},c.publish=function(a,i,r){"function"==typeof i&&(r=i,i={}),i=t.extend({},{width:"100%",height:"100%",start:!0},i),a.jquery&&(a=a[0]);var s=function(e){if(e)r(e);else{var t=c.get(a);i.start?t.start(r):r(null,t)}};if(t.html5&&u){var l=o.createElement("video");l.style.width=n(i.width),l.style.height=n(i.height),e.jQuery?jQuery(a).empty():a.innerHTML="",a.appendChild(l),s()}else c.fallback(a,i,s)},c.fallback=function(e,t,n){n("not_support_camera")};var f=function(e){var n=e.nodeName?a(e):e,i=t.Image(n);return i.type="image/png",i.width=n.width,i.height=n.height,i.size=4*n.width*n.height,i};c.Shot=f,t.Camera=c}(window,FileAPI),function(e,t,n){"use strict";var a=e.document,i=e.location,r=e.navigator;n.support.flash=function(){var t=r.mimeTypes,a=!1;if(r.plugins&&"object"==typeof r.plugins["Shockwave Flash"])a=r.plugins["Shockwave Flash"].description&&!(t&&t["application/x-shockwave-flash"]&&!t["application/x-shockwave-flash"].enabledPlugin);else try{a=!(!e.ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(i){n.log("ShockwaveFlash.ShockwaveFlash -- does not supported.")}return a}(),n.support.flash&&(0||!n.html5||!n.support.html5||n.cors&&!n.support.cors)&&function(){function o(e){return('<object id="#id#" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'">'+'<param name="movie" value="#src#" />'+'<param name="flashvars" value="#flashvars#" />'+'<param name="swliveconnect" value="true" />'+'<param name="allowscriptaccess" value="always" />'+'<param name="allownetworking" value="all" />'+'<param name="menu" value="false" />'+'<param name="wmode" value="#wmode#" />'+'<embed flashvars="#flashvars#" swliveconnect="true" allownetworking="all" allowscriptaccess="always" name="#id#" src="#src#" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'" menu="false" wmode="transparent" type="application/x-shockwave-flash"></embed>'+"</object>").replace(/#(\w+)#/gi,function(t,n){return e[n]})}function s(e,t){if(e&&e.style){var n,a;for(n in t){a=t[n],"number"==typeof a&&(a+="px");try{e.style[n]=a}catch(i){}}}}function l(e,t){n.each(t,function(t,n){var a=e[n];e[n]=function(){return this.parent=a,t.apply(this,arguments)}})}function u(e){return e&&!e.flashId}function c(e){var t=e.wid=n.uid();return w._fn[t]=e,"FileAPI.Flash._fn."+t}function f(e){try{w._fn[e.wid]=null,delete w._fn[e.wid]}catch(t){}}function d(e,t){if(!b.test(e)){if(/^\.\//.test(e)||"/"!=e.charAt(0)){var n=i.pathname;n=n.substr(0,n.lastIndexOf("/")),e=(n+"/"+e).replace("/./","/")}"//"!=e.substr(0,2)&&(e="//"+i.host+e),b.test(e)||(e=i.protocol+e)}return t&&(e+=(/\?/.test(e)?"&":"?")+t),e}function p(e,t,i){function r(){try{var e=w.get(u);e.setImage(t)}catch(a){n.log('flash.setImage -- can not set "base64":',a)}}var l,u=n.uid(),p=a.createElement("div");for(l in e)p.setAttribute(l,e[l]),p[l]=e[l];s(p,e),e.width="100%",e.height="100%",p.innerHTML=o(n.extend({id:u,src:d(n.flashImageUrl,"r="+n.uid()),wmode:"opaque",flashvars:"scale="+e.scale+"&callback="+c(function h(){return f(h),r(),!0})},e)),i(!1,p),p=null}function h(e){return{id:e.id,name:e.name,matrix:e.matrix,flashId:e.flashId}}function m(t){var n=t.getBoundingClientRect(),i=a.body,r=(t&&t.ownerDocument).documentElement;return{top:n.top+(e.pageYOffset||r.scrollTop)-(r.clientTop||i.clientTop||0),left:n.left+(e.pageXOffset||r.scrollLeft)-(r.clientLeft||i.clientLeft||0),width:n.right-n.left,height:n.bottom-n.top}}var g=n.uid(),v=0,y={},b=/^https?:/i,w={_fn:{},init:function(){var e=a.body&&a.body.firstChild;if(e)do if(1==e.nodeType){n.log("FlashAPI.Flash.init...");var t=a.createElement("div");return t.id="_"+g,s(t,{top:1,right:1,width:5,height:5,position:"absolute",zIndex:1e6+""}),e.parentNode.insertBefore(t,e),w.publish(t,g),void 0}while(e=e.nextSibling);10>v&&setTimeout(w.init,50*++v)},publish:function(e,t,a){a=a||{},e.innerHTML=o({id:t,src:d(n.flashUrl,"r="+n.version),wmode:a.camera?"":"transparent",flashvars:"callback="+(a.onEvent||"FileAPI.Flash.onEvent")+"&flashId="+t+"&storeKey="+r.userAgent.match(/\d/gi).join("")+"_"+n.version+(w.isReady||(n.pingUrl?"&ping="+n.pingUrl:""))+"&timeout="+n.flashAbortTimeout+(a.camera?"&useCamera=1":"")},a)},ready:function(){n.log("FileAPI.Flash.ready!"),w.ready=n.F,w.isReady=!0,w.patch(),n.event.on(a,"mouseover",w.mouseover),n.event.on(a,"click",function(e){w.mouseover(e)&&(e.preventDefault?e.preventDefault():e.returnValue=!0)})},getEl:function(){return a.getElementById("_"+g)},getWrapper:function(e){do if(/js-fileapi-wrapper/.test(e.className))return e;while((e=e.parentNode)&&e!==a.body)},mouseover:function(e){var t=n.event.fix(e).target;if(/input/i.test(t.nodeName)&&"file"==t.type){var i=t.getAttribute(g),r=w.getWrapper(t);if(n.multiFlash){if("i"==i||"r"==i)return!1;if("p"!=i){t.setAttribute(g,"i");var o=a.createElement("div");if(!r)return n.log("flash.mouseover.error: js-fileapi-wrapper not found"),void 0;s(o,{top:0,left:0,width:t.offsetWidth+100,height:t.offsetHeight+100,zIndex:1e6+"",position:"absolute"}),r.appendChild(o),w.publish(o,n.uid()),t.setAttribute(g,"p")}return!0}if(r){var l=m(r);s(w.getEl(),l),w.curInp=t}}else/object|embed/i.test(t.nodeName)||s(w.getEl(),{top:1,left:1,width:5,height:5})
},onEvent:function(e){var t=e.type;if("ready"==t){try{w.getInput(e.flashId).setAttribute(g,"r")}catch(a){}return w.ready(),setTimeout(function(){w.mouseenter(e)},50),!0}"ping"===t?n.log("(flash -> js).ping:",[e.status,e.savedStatus],e.error):"log"===t?n.log("(flash -> js).log:",e.target):t in w&&setTimeout(function(){n.log("Flash.event."+e.type+":",e),w[t](e)},1)},mouseenter:function(e){var t=w.getInput(e.flashId);if(t){w.cmd(e,"multiple",null!=t.getAttribute("multiple"));var a=[],i={};n.each((t.getAttribute("accept")||"").split(/,\s*/),function(e){n.accept[e]&&n.each(n.accept[e].split(" "),function(e){i[e]=1})}),n.each(i,function(e,t){a.push(t)}),w.cmd(e,"accept",a.length?a.join(",")+","+a.join(",").toUpperCase():"*")}},get:function(t){return a[t]||e[t]||a.embeds[t]},getInput:function(e){if(!n.multiFlash)return w.curInp;try{var t=w.getWrapper(w.get(e));if(t)return t.getElementsByTagName("input")[0]}catch(a){n.log('Can not find "input" by flashId:',e,a)}},select:function(e){var i,r=w.getInput(e.flashId),o=n.uid(r),s=e.target.files;n.each(s,function(e){n.checkFileObj(e)}),y[o]=s,a.createEvent?(i=a.createEvent("Event"),i.files=s,i.initEvent("change",!0,!0),r.dispatchEvent(i)):t?t(r).trigger({type:"change",files:s}):(i=a.createEventObject(),i.files=s,r.fireEvent("onchange",i))},cmd:function(e,t,a,i){try{return n.log("(js -> flash)."+t+":",a),w.get(e.flashId||e).cmd(t,a)}catch(r){n.log("(js -> flash).onError:",r),i||setTimeout(function(){w.cmd(e,t,a,!0)},50)}},patch:function(){n.flashEngine=n.support.transform=!0,l(n,{getFiles:function(e,t,a){if(a)return n.filterFiles(n.getFiles(e),t,a),null;var i=n.isArray(e)?e:y[n.uid(e.target||e.srcElement||e)];return i?(t&&(t=n.getFilesFilter(t),i=n.filter(i,function(e){return t.test(e.name)})),i):this.parent.apply(this,arguments)},getInfo:function(e,t){if(u(e))this.parent.apply(this,arguments);else{if(!e.__info){var a=e.__info=n.defer();w.cmd(e,"getFileInfo",{id:e.id,callback:c(function i(t,n){f(i),a.resolve(t,e.info=n)})})}e.__info.then(t)}}}),n.support.transform=!0,n.Image&&l(n.Image.prototype,{get:function(e,t){this.set({scaleMode:t||"noScale"}),this.parent(e)},_load:function(e,t){if(n.log("Flash.Image._load:",e),u(e))this.parent.apply(this,arguments);else{var a=this;n.getInfo(e,function(n){t.call(a,n,e)})}},_apply:function(e,t){if(n.log("FileAPI.Image._apply:",e),u(e))this.parent.apply(this,arguments);else{var a=this.getMatrix(e.info);w.cmd(e,"imageTransform",{id:e.id,matrix:a,callback:c(function i(r,o){n.log("FileAPI.Image._apply.callback:",r),f(i),r?t(r):!n.support.dataURI||o.length>3e4?p({width:a.deg%180?a.dh:a.dw,height:a.deg%180?a.dw:a.dh,scale:a.scaleMode},o,t):n.newImage("data:"+e.type+";base64,"+o,t)})})}},toData:function(e){var t=this.file,a=t.info,i=this.getMatrix(a);u(t)?this.parent.apply(this,arguments):("auto"==i.deg&&(i.deg=n.Image.exifOrientation[a&&a.exif&&a.exif.Orientation]||0),e.call(this,!t.info,{id:t.id,flashId:t.flashId,name:t.name,type:t.type,matrix:i}))}}),n.Image&&l(n.Image,{fromDataURL:function(e,t,a){!n.support.dataURI||e.length>3e4?p(n.extend({scale:"exactFit"},t),e.replace(/^data:[^,]+,/,""),function(e,t){a(t)}):this.parent(e,t,a)}}),n.Camera.fallback=function(e,t,a){var i=n.uid();n.log("Flash.Camera.publish: "+i),w.publish(e,i,n.extend(t,{camera:!0,onEvent:c(function r(e){"camera"==e.type&&(f(r),e.error?(n.log("Flash.Camera.publish.error: "+e.error),a(e.error)):(n.log("Flash.Camera.publish.success: "+i),a(null)))})}))},l(n.Camera.prototype,{_id:function(){return this.video.id},start:function(e){var t=this;w.cmd(this._id(),"camera.on",{callback:c(function a(i){f(a),i.error?(n.log("Flash.camera.on.error:"+i.error),e(i.error,t)):(n.log("Flash.camera.on.success: "+t._id()),t.active=!0,e(null,t))})})},stop:function(){this.active=!1,w.cmd(this._id(),"camera.off")},shot:function(){n.log("Flash.Camera.shot:",this._id());var e=w.cmd(this._id(),"shot",{});return e.type="image/png",e.flashId=this._id(),new n.Camera.Shot(e)}}),l(n.Form.prototype,{toData:function(e){for(var t=this.items,a=t.length;a--;)if(t[a].file&&u(t[a].blob))return this.parent.apply(this,arguments);n.log("flash.Form.toData"),e(t)}}),l(n.XHR.prototype,{_send:function(e,t){if(t.nodeName||t.append&&n.support.html5||n.isArray(t)&&"string"==typeof t[0])return this.parent.apply(this,arguments);var a,i,r={},o={},s=this;if(n.each(t,function(e){e.file?(o[e.name]=e=h(e.blob),i=e.id,a=e.flashId):r[e.name]=e.blob}),!i&&!a)return this.parent.apply(this,arguments);n.log("flash.XHR._send:",a,i,o),s.xhr={headers:{},abort:function(){w.cmd(a,"abort",{id:i})},getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return this.headers}};var l=n.queue(function(){w.cmd(a,"upload",{url:d(e.url),data:r,files:o,headers:e.headers,callback:c(function t(a){var i=a.type,r=a.result;n.log("flash.upload."+i+":",a),"progress"==i?(a.loaded=Math.min(a.loaded,a.total),a.lengthComputable=!0,e.progress(a)):"complete"==i?(f(t),"string"==typeof r&&(s.responseText=r.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")),s.end(a.status||200)):("abort"==i||"error"==i)&&(s.end(a.status||0,a.message),f(t))})})});n.each(o,function(e){l.inc(),n.getInfo(e,l.next)}),l.check()}})}};n.Flash=w,n.newImage("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",function(e,t){n.support.dataURI=!(1!=t.width||1!=t.height),w.init()})}()}(window,window.jQuery,FileAPI),"function"==typeof define&&define.amd&&define("FileAPI",[],function(){return FileAPI});